<template>
  <div id="app">
    <baseForm ref="testForm" :form="form" :rules="rules">
      <baseFormItem label="报告类型" prop="type">
        <select v-model="form.type">
          <option :value="1">基线检查报告</option>
          <option :value="2">渗透测试报告</option>
          <option :value="3">漏洞扫描报告</option>
        </select>
      </baseFormItem>
      <baseFormItem label="blur测试" prop="blurTest" :required="false">
        <input type="text" v-model="form.blurTest" />
      </baseFormItem>
      <div>
        <div>
          <div>
            <baseFormItem label="radio测试" prop="radioTest" required>
              <label>
                <input type="radio" v-model="form.radioTest" :value="false" />
                1
              </label>
              <label>
                <input type="radio" v-model="form.radioTest" :value="true" />
                2
              </label>
            </baseFormItem>
          </div>
        </div>
      </div>
      <baseDate />
      <baseFormItem label="责任部门" prop="dutyDepartment" required>
        <baseCascader
          v-model="form.dutyDepartment"
          :data="dutyDepartmentData"
          placeholder="请输入责任部门"
        />
      </baseFormItem>
      <button type="button" @click="submit">保存</button>
      <button type="button" @click="clearErr">clearErr</button>
    </baseForm>

    <baseTable :tableData="tableData" @rowClick="rowClick">
      <baseCol prop="name" label="信息系统" />
      <baseCol prop="time" label="整改时间" />
    </baseTable>
  </div>
</template>

<script>
import baseForm from './components/form-f'
import baseFormItem from './components/formItem-f'
import baseDate from './components/date'
import baseCascader from './components/cascader'
// import baseDialog from './components/dialog'
import baseTable from './components/table'
import baseCol from './components/col'

export default {
  name: 'app',
  components: {
    baseForm,
    baseFormItem,
    baseDate,
    baseCascader,
    baseTable,
    baseCol,
  },
  data() {
    const projectCode = /^([0-9A-Za-z-_.]{6,32})$/
    const fileNameRule = function (form) {
      if (form.dutyDepartment === '') return false
      else return true
    }
    return {
      dialog: true,
      dutyDepartmentData: [
        {
          id: 123,
          orgName: 'sssss',
          parentId: 1232311,
        },
      ],
      form: {
        type: null,
        blurTest: '',
        radioTest: '',
        dutyDepartment: '',
      },
      rules: {
        type: [
          { required: true, message: '请输入项目编号', trigger: 'change' },
        ],
        blurTest: [
          { required: true, message: '请输入文本', trigger: 'blur' },
          {
            validator: projectCode,
            message: '请输入由字母、数字、- 、 _ 或 . 组成的6-32位项目编号',
            trigger: 'blur',
          },
        ],
        radioTest: [{ required: true, message: 'radio', trigger: 'change' }],
        dutyDepartment: [
          { other: fileNameRule, message: '请输入责任部门', trigger: 'blur' },
        ],
      },
      tableData: [
        { name: 'name1', time: 'time1' },
        { name: 'name2', time: 'time2' },
      ],
    }
  },
  mounted() {},
  methods: {
    submit() {
      console.log(this.$refs.testForm.validate())
    },
    clearErr() {
      this.$refs.testForm.clearErr()
    },
    rowClick(item, index) {
      console.log(item)
      console.log(index)
    },
  },
}
</script>

<style lang="scss">
html,
body {
  margin: 0;
  padding: 0;
}
#app {
  min-height: 100vh;
  background: #001f3f;
  form {
    background: #fff;
  }
}
</style>
